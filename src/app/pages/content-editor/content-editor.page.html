<div class="grid grid-cols-2 gap-4">
  <textarea
    [(ngModel)]="content"
    (ngModelChange)="parseWithDebounce()"
    class="scrollbar sticky top-0 block h-dvh w-full resize-none border-none px-4 py-20 ring-0"
  ></textarea>
  <button
    (click)="photoPanel.up()"
    class="fixed top-4 left-4 flex size-10 items-center justify-center rounded-lg bg-yellow-50 shadow-lg"
  >
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      viewBox="0 0 24 24"
      stroke-width="1.5"
      stroke="currentColor"
      class="size-6"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"
      />
    </svg>
  </button>
  <div class="p-4">
    <div
      #md
      class="prose prose-sm md:prose-base prose-stone prose-blockquote:not-italic prose-blockquote:bg-stone-100 prose-blockquote:py-2 prose-blockquote:px-4 prose-img:max-w-lg prose-img:w-full prose-figure:max-w-lg prose-figure:w-full prose-figure:mx-auto prose-img:mx-auto max-w-screen-2xl pb-20"
    ></div>
  </div>
</div>

<button
  (click)="confirmPanel.up()"
  class="fixed right-4 bottom-4 flex size-10 items-center justify-center rounded-lg bg-blue-50 shadow-lg"
>
  <svg
    xmlns="http://www.w3.org/2000/svg"
    fill="none"
    viewBox="0 0 24 24"
    stroke-width="1.5"
    stroke="currentColor"
    class="size-6"
  >
    <path
      stroke-linecap="round"
      stroke-linejoin="round"
      d="m4.5 19.5 15-15m0 0H8.25m11.25 0v11.25"
    />
  </svg>
</button>

@if (confirmPanel.active) {
  <app-overlay>
    <div
      class="flex w-full max-w-sm flex-col gap-8 rounded-xl bg-white p-8 shadow-2xl"
    >
      <h3 class="text-center text-2xl font-bold">บันทึกเนื้อหา</h3>
      <form
        [formGroup]="form"
        (ngSubmit)="saveChanges()"
        class="flex flex-col gap-8"
      >
        <p>ยืนยันที่จะบันทึกหรือไม่</p>
        <div class="grid grid-cols-2 place-items-center">
          <button type="submit" class="font-semibold text-blue-600">
            บันทึก
          </button>
          <button
            type="button"
            (click)="confirmPanel.down()"
            class="font-semibold"
          >
            ยกเลิก
          </button>
        </div>
      </form>
    </div>
  </app-overlay>
}

@if (photoPanel.active) {
  <app-overlay>
    <div
      class="scrollbar relative flex h-full w-full flex-col gap-8 overflow-auto rounded-xl bg-white p-4 shadow-2xl"
    >
      <app-photos />
      <button
        (click)="photoPanel.down()"
        class="fixed top-4 right-4 flex size-10 items-center justify-center rounded-lg bg-red-50 shadow-lg"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M6 18 18 6M6 6l12 12"
          />
        </svg>
      </button>
    </div>
  </app-overlay>
}
